<!DOCTYPE html>
<!--
Math Worksheet HTML
Generated: 2025-08-26 18:49:55
Grade 4: Problem Solving + soccer + Advanced + Soccer Math Adventure
Math Topic: Problem Solving
Sports Context: soccer
Difficulty Level: Advanced
-->

<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öΩ Ng√¢n S√°ch Trang B·ªã v√† Chi Ph√≠ ƒê·ªôi B√≥ng - Cu·ªôc Phi√™u L∆∞u To√°n H·ªçc B√≥ng ƒê√°</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsxgraph@1.6.1/distrib/jsxgraphcore.js"></script>
    
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Marker Felt', cursive;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #2c3e50;
            line-height: 1.6;
            padding: 1rem;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            overflow: hidden;
            box-sizing: border-box;
        }

        .lesson-container {
            width: 100%;
            max-width: 1200px;
            padding: 1rem;
            overflow: hidden;
            box-sizing: border-box;
        }

        .content-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 5px solid;
            padding: 1.5rem;
            margin: 1rem 0;
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
            box-sizing: border-box;
        }

        .elementary-header {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Marker Felt', cursive;
            font-size: 2.5em;
            color: #e74c3c;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            margin: 1rem 0;
        }

        .elementary-problem {
            background: linear-gradient(135deg, #fff5f5 0%, #ffeaa7 100%);
            border: 3px solid #fd79a8;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
            box-sizing: border-box;
        }

        .elementary-emoji {
            font-size: 1.5em;
            margin: 0 0.5rem;
            vertical-align: middle;
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.2));
        }

        .elementary-star {
            color: #fdcb6e;
            font-size: 1.8em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            margin: 0 0.2rem;
        }

        .theory-section {
            border-left-color: #1976d2;
            background: linear-gradient(135deg, #e3f2fd 0%, #f1f8ff 100%);
        }

        .practice-section {
            border-left-color: #388e3c;
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8f1 100%);
        }

        .problem-section {
            border-left-color: #7b1fa2;
            background: linear-gradient(135deg, #f3e5f5 0%, #faf5ff 100%);
        }

        .review-section {
            border-left-color: #f57c00;
            background: linear-gradient(135deg, #fff3e0 0%, #fff8f0 100%);
        }

        .step-box {
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
            box-sizing: border-box;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 1rem;
            margin: 0.5rem 0;
        }

        .vocab-item {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8f1 100%);
            border-left: 4px solid #388e3c;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
        }

        .math-block {
            display: block;
            text-align: center;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #fafbfc 0%, #f8f9fa 100%);
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1.3em;
            color: #2c3e50;
            font-family: 'Times New Roman', serif;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            max-width: 100%;
            overflow: auto;
            word-wrap: break-word;
            box-sizing: border-box;
        }

        .answer-input {
            width: 100%;
            font-size: 16px;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            margin: 0.5rem 0;
            max-width: 100%;
            box-sizing: border-box;
        }

        .check-btn {
            width: 100%;
            min-height: 44px;
            padding: 12px;
            font-size: 16px;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            max-width: 100%;
            box-sizing: border-box;
            margin: 0.5rem 0;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(116, 185, 255, 0.4);
        }

        .feedback {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-weight: bold;
            text-align: center;
            display: none;
            max-width: 100%;
            box-sizing: border-box;
        }

        .correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .example-box, .challenge-box, .elementary-problem {
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem 0;
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
            box-sizing: border-box;
        }

        .example-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #f1f8ff 100%);
            border: 3px solid #1976d2;
        }

        .challenge-box {
            background: linear-gradient(135deg, #f3e5f5 0%, #faf5ff 100%);
            border: 3px solid #7b1fa2;
        }

        .solution {
            display: none;
            background: #e8f5e8;
            border: 2px solid #388e3c;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
            box-sizing: border-box;
        }

        .show-solution-btn {
            background: #388e3c;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 0.5rem 0;
            font-size: 14px;
        }

        .show-solution-btn:hover {
            background: #2e7d32;
        }

        .jxgbox {
            border: 2px solid #2c3e50;
            background: white;
            margin: 1rem auto;
            max-width: 100%;
            overflow: hidden;
            box-sizing: border-box;
            position: relative;
            border-radius: 0;
        }

        h1 {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 2rem;
            color: #e74c3c;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
        }

        h2 {
            font-size: 2em;
            color: #2c3e50;
            margin: 1.5rem 0 1rem 0;
            text-align: center;
        }

        h3 {
            font-size: 1.5em;
            color: #34495e;
            margin: 1rem 0;
        }

        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin: 0.5rem 0;
            color: #2c3e50;
        }

        .strategy-list {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .tab-navigation {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .tab-btn {
            padding: 10px 20px;
            border: 2px solid #74b9ff;
            background: white;
            color: #2c3e50; /* IMPROVED: Darker color for better contrast */
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #74b9ff;
            color: #ffffff;
        }

        .tab-btn:hover {
            background: #0984e3;
            color: #ffffff;
        }

        .lesson-panel {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            width: 100%;
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
            box-sizing: border-box;
        }

        .lesson-panel.active {
            display: block !important;
            opacity: 1;
            visibility: visible;
        }
        
        .lesson-panel:not(.active) {
            display: none !important;
            opacity: 0;
            visibility: hidden;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .bounce {
            animation: bounce 0.6s ease-in-out;
        }

        @media (max-width: 767px) {
            .container {
                padding: 10px;
            }
            h1 { font-size: 2em; }
        }
    </style>
    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\(', '\)']],
                displayMath: [['\[', '\]']]
            }
        };
    </script>
</head>

<body>
    <div class="container">
        <h1 class="elementary-header">‚öΩ Ng√¢n S√°ch Trang B·ªã v√† Chi Ph√≠ ƒê·ªôi B√≥ng ‚öΩ<br>M·ªôt Cu·ªôc Phi√™u L∆∞u To√°n H·ªçc B√≥ng ƒê√°! üåà</h1>

        <div class="tab-navigation">
            <button class="tab-btn active" onclick="showLesson(1)">üìö M·ª•c Ti√™u</button>
            <button class="tab-btn" onclick="showLesson(2)">üéØ T·ª´ V·ª±ng</button>
            <button class="tab-btn" onclick="showLesson(3)">üìñ V√≠ D·ª•</button>
            <button class="tab-btn" onclick="showLesson(4)">üöÄ Luy·ªán T·∫≠p</button>
            <button class="tab-btn" onclick="showLesson(5)">üèÜ Th·ª≠ Th√°ch</button>
        </div>
        
        <div id="tab-status" style="text-align: center; margin: 10px 0; padding: 10px; background: #e8f5e8; border-radius: 8px; font-weight: bold; color: #2c3e50;">
            üìö ƒêang xem: M·ª•c Ti√™u (B√†i 1)
        </div>

        <div id="lesson1" class="lesson-panel active">
            <div class="content-section theory-section">
                <h2>üìö M·ª•c Ti√™u H·ªçc T·∫≠p</h2>
                <div class="elementary-problem">
                    <p>Sau khi ho√†n th√†nh b√†i h·ªçc n√†y, em s·∫Ω c√≥ th·ªÉ:</p>
                    <ul>
                        <li><span class="elementary-star">‚≠ê</span> Nh√¢n c√°c s·ªë c√≥ nhi·ªÅu ch·ªØ s·ªë ƒë·ªÉ t√≠nh t·ªïng chi ph√≠</li>
                        <li><span class="elementary-star">‚≠ê</span> C·ªông v√† tr·ª´ c√°c s·ªë ti·ªÅn c√≥ ph·∫ßn th·∫≠p ph√¢n</li>
                        <li><span class="elementary-star">‚≠ê</span> Gi·∫£i c√°c b√†i to√°n ƒë·ªë nhi·ªÅu b∆∞·ªõc li√™n quan ƒë·∫øn ng√¢n s√°ch</li>
                        <li><span class="elementary-star">‚≠ê</span> So s√°nh chi ph√≠ v√† ƒë∆∞a ra quy·∫øt ƒë·ªãnh v·ªÅ ng√¢n s√°ch</li>
                        <li><span class="elementary-star">‚≠ê</span> L√†m vi·ªác v·ªõi ph·∫ßn trƒÉm v√† gi·∫£m gi√° ƒë∆°n gi·∫£n (Th·ª≠ th√°ch N√¢ng cao!)</li>
                    </ul>
                </div>
            </div>

            <div class="content-section theory-section">
                <h2>üåü C√¢u Chuy·ªán B·∫Øt ƒê·∫ßu...</h2>
                <div class="example-box">
                    <p>G·∫∑p g·ª° Diego! <span class="elementary-emoji">‚öΩ</span> C·∫≠u ·∫•y ƒëang gi√∫p Hu·∫•n luy·ªán vi√™n Maria l·∫≠p k·∫ø ho·∫°ch ng√¢n s√°ch cho ƒë·ªôi b√≥ng, gi·ªëng nh∆∞ c√°c chuy√™n gia t·∫°i FC Barcelona! Em c√≥ bi·∫øt r·∫±ng FC Barcelona chi h∆°n 50 tri·ªáu ƒë√¥ la m·ªói nƒÉm cho trang thi·∫øt b·ªã v√† ƒë·ªì d√πng c·ªßa c·∫ßu th·ªß kh√¥ng? C√°c nguy√™n t·∫Øc to√°n h·ªçc gi√∫p c√°c ƒë·ªôi chuy√™n nghi·ªáp c≈©ng ch√≠nh l√† nh·ªØng nguy√™n t·∫Øc gi√∫p ƒë·ªôi c·ªßa Diego qu·∫£n l√Ω ti·ªÅn b·∫°c m·ªôt c√°ch kh√¥n ngoan!</p>
                </div>
            </div>
        </div>

        <div id="lesson2" class="lesson-panel">
            <div class="content-section theory-section">
                <h2>üéØ T·ª´ V·ª±ng Ch√≠nh</h2>
                <div class="vocab-section">
                    <div class="vocab-item">
                        <strong>Ng√¢n s√°ch (Budget)</strong>: <span class="elementary-emoji">üí∞</span> S·ªë ti·ªÅn c√≥ s·∫µn ƒë·ªÉ chi ti√™u
                    </div>
                    <div class="vocab-item">
                        <strong>T·ªïng chi ph√≠ (Total Cost)</strong>: <span class="elementary-emoji">üßÆ</span> S·ªë ti·ªÅn cu·ªëi c√πng sau khi c·ªông t·∫•t c·∫£ c√°c kho·∫£n chi
                    </div>
                    <div class="vocab-item">
                        <strong>ƒê∆°n gi√° (Unit Price)</strong>: <span class="elementary-emoji">üè∑Ô∏è</span> Chi ph√≠ c·ªßa m·ªôt m√≥n h√†ng
                    </div>
                    <div class="vocab-item">
                        <strong>Gi·∫£m gi√° (Discount)</strong>: <span class="elementary-emoji">üí∏</span> S·ª± gi·∫£m tr·ª´ tr√™n gi√° b√°n
                    </div>
                    <div class="vocab-item">
                        <strong>S·ªë d∆∞ (Surplus)</strong>: <span class="elementary-emoji">üìà</span> S·ªë ti·ªÅn c√≤n l·∫°i sau khi tr·ª´ ƒëi c√°c chi ph√≠
                    </div>
                </div>
            </div>
        </div>

        <div id="lesson3" class="lesson-panel">
            <div class="content-section practice-section">
                <h2>üìñ V√≠ D·ª• H∆∞·ªõng D·∫´n</h2>
                
                <div class="example-box">
                    <h3>V√≠ d·ª• 1: To√°n H·ªçc √Åo ƒê·∫•u <span class="elementary-emoji">üëï</span></h3>
                    <p><em>B·ªëi c·∫£nh L·ªãch s·ª≠: Nh·ªØng chi·∫øc √°o ƒë·∫•u b√≥ng ƒë√° ƒë·∫ßu ti√™n ƒë∆∞·ª£c l√†m b·∫±ng cotton n·∫∑ng v√†o nh·ªØng nƒÉm 1870!</em></p>
                    
                    <div class="step-box">
                        <p>Diego c·∫ßn t√≠nh chi ph√≠ mua √°o ƒë·∫•u cho ƒë·ªôi 15 c·∫ßu th·ªß c·ªßa m√¨nh.</p>
                        <ul>
                            <li>Gi√° m·ªói chi·∫øc √°o: $20</li>
                            <li>S·ªë l∆∞·ª£ng √°o c·∫ßn mua: 15</li>
                        </ul>
                    </div>

                    <div class="step-box">
                        <p><strong>Gi·∫£i ph√°p t·ª´ng b∆∞·ªõc:</strong></p>
                        <div class="math-block" role="math" aria-label="T·ªïng chi ph√≠ √°o ƒë·∫•u b·∫±ng S·ªë l∆∞·ª£ng √°o nh√¢n v·ªõi Gi√° m·ªói √°o">
                            \\[
                            \text{T·ªïng Chi Ph√≠ √Åo} = \text{S·ªë L∆∞·ª£ng √Åo} \times \text{Gi√° M·ªói √Åo}
                            \\]
                        </div>
                        <div class="math-block" role="math" aria-label="T·ªïng chi ph√≠ √°o ƒë·∫•u b·∫±ng 15 nh√¢n 20 b·∫±ng 300">
                            \\[
                            \text{T·ªïng Chi Ph√≠ √Åo} = 15 \times 20 = 300
                            \\]
                        </div>
                        <p><strong>ƒê√°p √°n: $300</strong> <span class="elementary-emoji">üíµ</span></p>
                    </div>
                </div>

                <div class="example-box">
                    <h3>V√≠ d·ª• 2: Ph√©p C·ªông V·ªõi T·∫•t <span class="elementary-emoji">üß¶</span></h3>
                    <p><em>B·ªëi c·∫£nh Lu·∫≠t l·ªá: FIFA y√™u c·∫ßu t·∫•t c·∫£ c·∫ßu th·ªß trong m·ªôt ƒë·ªôi ph·∫£i mang t·∫•t gi·ªëng nhau!</em></p>
                    
                    <div class="step-box">
                        <p>B√¢y gi·ªù Diego c·ªông th√™m chi ph√≠ mua t·∫•t:</p>
                        <ul>
                            <li>Gi√° t·∫•t: $8 m·ªói ƒë√¥i</li>
                            <li>S·ªë l∆∞·ª£ng ƒë√¥i c·∫ßn mua: 15</li>
                        </ul>
                    </div>

                    <div class="step-box">
                        <div class="math-block" role="math" aria-label="T·ªïng chi ph√≠ t·∫•t b·∫±ng 15 nh√¢n 8 b·∫±ng 120">
                            \\[
                            \text{T·ªïng Chi Ph√≠ T·∫•t} = 15 \times 8 = 120
                            \\]
                        </div>
                        <p><strong>Chi ph√≠ ƒë·ªìng ph·ª•c k·∫øt h·ª£p:</strong></p>
                        <div class="math-block" role="math" aria-label="T·ªïng chi ph√≠ ƒë·ªìng ph·ª•c b·∫±ng Chi ph√≠ √°o c·ªông Chi ph√≠ t·∫•t b·∫±ng 300 c·ªông 120 b·∫±ng 420">
                            \\[
                            \text{T·ªïng Chi Ph√≠ ƒê·ªìng Ph·ª•c} = \text{Chi Ph√≠ √Åo} + \text{Chi Ph√≠ T·∫•t} = 300 + 120 = 420
                            \\]
                        </div>
                        <p><strong>ƒê√°p √°n: $420</strong> <span class="elementary-emoji">üéØ</span></p>
                    </div>
                    <div id="costChart" class="jxgbox" style="height: 300px; width: 100%;"></div>
                </div>

                <div class="example-box">
                    <h3>V√≠ d·ª• 3: So S√°nh V·ªõi ƒê·ªôi Chuy√™n Nghi·ªáp <span class="elementary-emoji">üèÜ</span></h3>
                    <p><em>B·ªëi c·∫£nh th·ª±c t·∫ø: Ng√¢n s√°ch trang thi·∫øt b·ªã c·ªßa Manchester United l√† 8 tri·ªáu ƒë√¥ la m·ªói nƒÉm!</em></p>
                    
                    <div class="step-box">
                        <p>N·∫øu Manchester United chi $8,000,000 cho trang thi·∫øt b·ªã cho 25 c·∫ßu th·ªß, h·ªç chi trung b√¨nh bao nhi√™u cho m·ªói c·∫ßu th·ªß?</p>
                        <div class="math-block" role="math" aria-label="Chi ph√≠ m·ªói c·∫ßu th·ªß b·∫±ng 8,000,000 chia cho 25 b·∫±ng 320,000">
                            \\[
                            \text{Chi Ph√≠ M·ªói C·∫ßu Th·ªß} = \frac{8,000,000}{25} = 320,000
                            \\]
                        </div>
                        <p><strong>ƒê√°p √°n: $320,000 m·ªói c·∫ßu th·ªß!</strong> <span class="elementary-emoji">üò±</span></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="lesson4" class="lesson-panel">
            <div class="content-section problem-section">
                <h2>üöÄ B√†i T·∫≠p Th·ª±c H√†nh ƒê·ªôc L·∫≠p</h2>

                <div class="elementary-problem" data-problem-type="practice">
                    <h3>B√†i 1: Ng√¢n S√°ch C∆° B·∫£n <span class="elementary-star">‚≠ê</span></h3>
                    <p><em>C√¢u chuy·ªán: ƒê·ªôi c·ªßa Emma c·∫ßn trang b·ªã m·ªõi!</em></p>
                    <p>ƒê·ªôi b√≥ng c·ªßa Emma c√≥ 12 c·∫ßu th·ªß. H·ªç c·∫ßn:</p>
                    <ul>
                        <li>B√≥ng ƒë√°: $15 m·ªói qu·∫£ (c·∫ßn 6 qu·∫£)</li>
                        <li>N√≥n t·∫≠p: $3 m·ªói c√°i (c·∫ßn 20 c√°i)</li>
                    </ul>
                    <p>T√≠nh t·ªïng chi ph√≠ cho b√≥ng v√† n√≥n t·∫≠p.</p>
                    
                    <input type="number" id="answer1" class="answer-input" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa em (ch·ªâ s·ªë ƒë√¥ la)" aria-label="ƒê√°p √°n cho B√†i 1">
                    <button class="check-btn" onclick="checkAnswer('answer1', 150, 1)" aria-label="Ki·ªÉm tra ƒë√°p √°n cho B√†i 1">Ki·ªÉm Tra <span class="elementary-emoji">‚úÖ</span></button>
                    <div id="feedback1" class="feedback"></div>
                    
                    <button class="show-solution-btn" onclick="toggleSolution('solution1')">Xem L·ªùi Gi·∫£i</button>
                    <div id="solution1" class="solution" style="display: none">
                        <p><strong>L·ªùi gi·∫£i:</strong></p>
                        <div class="math-block" role="math" aria-label="L·ªùi gi·∫£i cho B√†i 1">
                            \\[
                            \begin{align*}
                            \text{B√≥ng ƒë√°: } & 6 \times 15 = 90 \\
                            \text{N√≥n t·∫≠p: } & 20 \times 3 = 60 \\
                            \hline
                            \text{T·ªïng c·ªông: } & 90 + 60 = 150
                            \end{align*}
                            \\]
                        </div>
                        <p><strong>ƒê√°p √°n: $150</strong> <span class="elementary-emoji">üí∞</span></p>
                    </div>
                </div>

                <div class="elementary-problem" data-problem-type="practice">
                    <h3>B√†i 2: Th√°m T·ª≠ Gi·∫£m Gi√° <span class="elementary-star">‚≠ê‚≠ê</span></h3>
                    <p><em>B·ªëi c·∫£nh Chi·∫øn l∆∞·ª£c: C√°c ƒë·ªôi th∆∞·ªùng mua s·ªë l∆∞·ª£ng l·ªõn ƒë·ªÉ ti·∫øt ki·ªám ti·ªÅn!</em></p>
                    <p>Diego t√¨m th·∫•y m·ªôt c·ª≠a h√†ng th·ªÉ thao c√≥ ∆∞u ƒë√£i:</p>
                    <ul>
                        <li>Gi√° th√¥ng th∆∞·ªùng cho mi·∫øng b·∫£o v·ªá ·ªëng ƒë·ªìng: $12 m·ªói c√°i</li>
                        <li>Gi·∫£m gi√° khi mua s·ªë l∆∞·ª£ng l·ªõn: Mua 15 c√°i tr·ªü l√™n, gi·∫£m 20%</li>
                        <li>S·ªë l∆∞·ª£ng c·∫ßu th·ªß trong ƒë·ªôi: 15</li>
                    </ul>
                    <p>ƒê·ªôi b√≥ng ti·∫øt ki·ªám ƒë∆∞·ª£c bao nhi√™u ti·ªÅn v·ªõi ∆∞u ƒë√£i mua s·ªë l∆∞·ª£ng l·ªõn?</p>
                    
                    <input type="number" id="answer2" class="answer-input" placeholder="Nh·∫≠p s·ªë ti·ªÅn ti·∫øt ki·ªám" aria-label="ƒê√°p √°n cho B√†i 2">
                    <button class="check-btn" onclick="checkAnswer('answer2', 36, 2)" aria-label="Ki·ªÉm tra ƒë√°p √°n cho B√†i 2">Ki·ªÉm Tra <span class="elementary-emoji">‚úÖ</span></button>
                    <div id="feedback2" class="feedback"></div>
                    
                    <button class="show-solution-btn" onclick="toggleSolution('solution2')">Xem L·ªùi Gi·∫£i</button>
                    <div id="solution2" class="solution" style="display: none">
                        <p><strong>L·ªùi gi·∫£i:</strong></p>
                        <div class="math-block" role="math" aria-label="L·ªùi gi·∫£i cho B√†i 2">
                             \\[
                            \begin{align*}
                            \text{Gi√° g·ªëc: } & 15 \times 12 = 180 \\
                            \text{S·ªë ti·ªÅn gi·∫£m: } & 180 \times 0.20 = 36 \\
                            \text{Gi√° sau gi·∫£m: } & 180 - 36 = 144
                            \end{align*}
                            \\]
                        </div>
                        <p><strong>Ti·∫øt ki·ªám: $36</strong> <span class="elementary-emoji">üí∏</span></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="lesson5" class="lesson-panel">
            <div class="content-section problem-section">
                <h2>üèÜ B√†i T·∫≠p Th·ª≠ Th√°ch Cho Nh√† V√¥ ƒê·ªãch To√°n H·ªçc!</h2>

                <div class="challenge-box" data-problem-type="practice">
                    <h3>Th·ª≠ th√°ch 1: Nh√† T·ªï Ch·ª©c Gi·∫£i ƒê·∫•u <span class="elementary-emoji">üé™</span></h3>
                    <p><em>·ª®ng d·ª•ng th·ª±c t·∫ø n√¢ng cao</em></p>
                    <p>Em ƒëang t·ªï ch·ª©c m·ªôt gi·∫£i ƒë·∫•u nh·ªè v·ªõi 4 ƒë·ªôi. M·ªói ƒë·ªôi c√≥ 14 c·∫ßu th·ªß. Em c·∫ßn mua:</p>
                    <ul>
                        <li>√Åo ƒë·∫•u: $25 m·ªói chi·∫øc (1 chi·∫øc/c·∫ßu th·ªß)</li>
                        <li>Qu·∫ßn ƒë√πi: $18 m·ªói chi·∫øc (1 chi·∫øc/c·∫ßu th·ªß)</li>
                        <li>B√≥ng ƒë√°: $22 m·ªói qu·∫£ (5 qu·∫£/ƒë·ªôi)</li>
                    </ul>
                    <p>Gi·∫£i ƒë·∫•u c√≥ ng√¢n s√°ch $4,000. Gi·∫£i ƒë·∫•u c√≥ th·ªÉ mua th√™m bao nhi√™u qu·∫£ b√≥ng v·ªõi s·ªë ti·ªÅn c√≤n l·∫°i?</p>
                    
                    <input type="number" id="answer4" class="answer-input" placeholder="S·ªë qu·∫£ b√≥ng mua th√™m" aria-label="ƒê√°p √°n cho Th·ª≠ th√°ch 1">
                    <button class="check-btn" onclick="checkAnswer('answer4', 52, 4)" aria-label="Ki·ªÉm tra ƒë√°p √°n cho Th·ª≠ th√°ch 1">Ki·ªÉm Tra <span class="elementary-emoji">‚úÖ</span></button>
                    <div id="feedback4" class="feedback"></div>
                    
                    <button class="show-solution-btn" onclick="toggleSolution('solution4')">Xem L·ªùi Gi·∫£i</button>
                    <div id="solution4" class="solution" style="display: none">
                        <p><strong>L·ªùi gi·∫£i:</strong></p>
                        <div class="math-block" role="math" aria-label="L·ªùi gi·∫£i cho Th·ª≠ th√°ch 1">
                             \\[
                            \begin{align*}
                            \text{T·ªïng s·ªë c·∫ßu th·ªß: } & 4 \times 14 = 56 \\
                            \text{Chi ph√≠ √°o: } & 56 \times 25 = 1,400 \\
                            \text{Chi ph√≠ qu·∫ßn: } & 56 \times 18 = 1,008 \\
                            \text{Chi ph√≠ b√≥ng: } & 4 \times 5 \times 22 = 440 \\
                            \hline
                            \text{T·ªïng chi ph√≠: } & 1400 + 1008 + 440 = 2,848 \\
                            \text{S·ªë d∆∞: } & 4000 - 2848 = 1,152 \\
                            \text{B√≥ng mua th√™m: } & 1152 \div 22 = 52.36...
                            \end{align*}
                            \\]
                        </div>
                        <p><strong>H·ªç c√≥ th·ªÉ mua th√™m 52 qu·∫£ b√≥ng</strong> <span class="elementary-star">‚≠ê</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLesson = 1;
        let progress = JSON.parse(localStorage.getItem('lessonProgress')) || {};

        function showLesson(lessonNumber) {
            try {
                document.querySelectorAll('.lesson-panel').forEach(panel => panel.classList.remove('active'));
                const selectedPanel = document.getElementById('lesson' + lessonNumber);
                if (selectedPanel) selectedPanel.classList.add('active');
                
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                const tabButtons = document.querySelectorAll('.tab-btn');
                if (tabButtons[lessonNumber - 1]) tabButtons[lessonNumber - 1].classList.add('active');

                currentLesson = lessonNumber;
                progress.currentLesson = lessonNumber;
                localStorage.setItem('lessonProgress', JSON.stringify(progress));
                
                const statusElement = document.getElementById('tab-status');
                if (statusElement) {
                    const activeTab = document.querySelector('.tab-btn.active');
                    if (activeTab) statusElement.textContent = `üìö ƒêang xem: ${activeTab.textContent} (B√†i ${lessonNumber})`;
                }
                
                if (window.MathJax) MathJax.typesetPromise();
            } catch (error) {
                console.error(`L·ªói trong showLesson(${lessonNumber}):`, error);
            }
        }

        function checkAnswer(inputId, correctAnswer, questionNumber) {
            const inputElement = document.getElementById(inputId);
            const userAnswer = parseFloat(inputElement.value);
            const feedbackElement = document.getElementById('feedback' + questionNumber);
            
            if (isNaN(userAnswer)) {
                feedbackElement.textContent = 'Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá! ü§î';
                feedbackElement.className = 'feedback incorrect';
                feedbackElement.style.display = 'block';
                return;
            }
            
            if (userAnswer === correctAnswer) {
                feedbackElement.textContent = 'Xu·∫•t s·∫Øc! Em ƒë√£ gi·∫£i ƒë√∫ng! üéâ‚öΩ';
                feedbackElement.className = 'feedback correct bounce';
                progress['question' + questionNumber] = true;
                
                setTimeout(() => {
                    feedbackElement.classList.remove('bounce');
                }, 600);
            } else {
                feedbackElement.textContent = 'Ch∆∞a ƒë√∫ng l·∫Øm. Ki·ªÉm tra l·∫°i c√°c ph√©p t√≠nh v√† th·ª≠ l·∫°i nh√©! üí™';
                feedbackElement.className = 'feedback incorrect';
            }
            
            feedbackElement.style.display = 'block';
            localStorage.setItem('lessonProgress', JSON.stringify(progress));
        }

        function toggleSolution(solutionId) {
            const solution = document.getElementById(solutionId);
            const button = solution.previousElementSibling.previousElementSibling; // adjusted selector
            
            if (solution.style.display === 'none' || solution.style.display === '') {
                solution.style.display = 'block';
                button.textContent = '·∫®n L·ªùi Gi·∫£i';
            } else {
                solution.style.display = 'none';
                button.textContent = 'Xem L·ªùi Gi·∫£i';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const savedProgress = JSON.parse(localStorage.getItem('lessonProgress'));
            if (savedProgress && savedProgress.currentLesson) {
                showLesson(savedProgress.currentLesson);
            } else {
                showLesson(1);
            }
            
            try {
                JXG.Options.infobox.fontSize = 0;
                const board = JXG.JSXGraph.initBoard('costChart', {
                    boundingbox: [-1, 450, 4, -50],
                    axis: true,
                    grid: false,
                    showCopyright: false,
                    showNavigation: false,
                    defaultAxes: {
                        x: { name: 'M·ª•c', ticks: { visible: false } },
                        y: { name: 'Chi ph√≠ ($)', ticks: { majorHeight: 20 } }
                    }
                });
                board.create('chart', [300], { chartStyle: 'bar', width: 0.6, labels: ['√Åo ƒë·∫•u ($300)'], color: '#1976d2' });
                board.create('chart', [120], { chartStyle: 'bar', width: 0.6, labels: ['T·∫•t ($120)'], offset: [1.2, 0], color: '#f57c00' });
                board.create('chart', [420], { chartStyle: 'bar', width: 0.6, labels: ['T·ªïng ($420)'], offset: [2.4, 0], color: '#388e3c' });
            } catch (e) {
                console.error("Kh·ªüi t·∫°o JSXGraph th·∫•t b·∫°i: ", e);
            }
        });
    </script>
</body>
</html>

